# 虚拟直播助手 (Virtual Live Assistant)

这是一个使用阿里云语音合成服务将文本故事转换为语音并播放的程序。特别适合与抖音直播伴侣等直播软件配合使用，实现自动化故事播放。

## 功能特点

- 自动读取故事库中的文本文件
- 使用阿里云cosyVoice语音合成服务将文本转换为自然流畅的语音
- 支持通过虚拟声卡输出，可与抖音直播伴侣等直播软件配合使用
- 自动清理旧文件，维护磁盘空间
- 详细的控制台输出，方便监控播放进度

## 安装要求

1. Python 3.6+
2. 安装所需依赖：
   ```
   pip install -r requirements.txt
   ```
3. 虚拟声卡软件（与抖音直播伴侣配合使用时需要）：
   - Windows: VB-Cable, Voicemeeter
   - Mac: Soundflower, BlackHole
   - Linux: PulseAudio, JACK

## 配置说明

1. 创建`.env`文件，添加阿里云语音合成服务的访问凭证：
   ```
   ALIYUN_AK_ID=你的阿里云AccessKey ID
   ALIYUN_AK_SECRET=你的阿里云AccessKey Secret
   ```

2. 在`main.py`中配置虚拟声卡设备ID：
   ```python
   # 虚拟声卡输出设备ID，如需更改请修改此值
   VIRTUAL_OUTPUT_DEVICE_ID = 17  # 修改为您系统中的虚拟声卡设备ID
   ```

## 使用方法

### 准备故事文件

1. 在`story`文件夹中放入文本故事文件（.txt格式）
2. 文件名将作为故事标题显示

### 运行程序

```
python main.py
```

程序启动后会：
1. 列出所有音频设备，帮助您找到正确的虚拟声卡设备ID
2. 读取story文件夹中的所有故事文件
3. 将每个故事的文本转换为语音并播放

### 与抖音直播伴侣配合使用

1. 安装虚拟声卡软件
2. 在`main.py`中设置`USE_PYGAME = False`，启用虚拟声卡输出
3. 使用`list_devices()`函数找到虚拟声卡的设备ID，并更新`VIRTUAL_OUTPUT_DEVICE_ID`
4. 在抖音直播伴侣中，选择同一个虚拟声卡作为音频输入源
5. 运行程序，语音将通过虚拟声卡传输到抖音直播伴侣

## 故障排除

1. **找不到虚拟声卡设备**
   - 确保已安装虚拟声卡软件
   - 运行程序查看设备列表，找到正确的设备ID

2. **抖音直播伴侣听不到声音**
   - 确保在抖音直播伴侣中选择了正确的音频输入设备
   - 检查虚拟声卡设备ID是否正确
   - 尝试在系统音频设置中测试虚拟声卡

3. **获取token失败**
   - 检查`.env`文件中的阿里云访问凭证是否正确
   - 确保网络连接正常

## 许可证

[MIT License](LICENSE)